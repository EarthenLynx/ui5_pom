sap.ui.define(["sap/ui/model/json/JSONModel","./Config.model"],function(t,e){"use strict";const s=t.extend("sap.ui.demo.basicTemplate.model.TaskModel",{modelname:"Task",tie(t){t.getOwnerComponent().setModel(this,this.modelname)},addToHistory(t){if(e.getProperty("/settings/history/session")===true){const s=this.getProperty("/history");const i=s.findIndex(e=>e.title==t.title&&e.status.isWorking===t.status.isWorking&&e.status.isPausing===t.status.isPausing);if(i>=0){const e=new Date;s[i].msExpired+=t.msExpired;s[i].endDate=e}else{const e=new Date;const i=new Date(e-t.msExpired);t.endDate=e;t.startDate=i;s.push(t)}this.setProperty("/history",s);if(e.getProperty("/settings/history/persistent")===true){if(!localStorage.getItem("history")){localStorage.setItem("history",JSON.stringify([]))}localStorage.setItem("history",JSON.stringify(s))}}},updateTaskByTaskPath(){const{sPath:t,...s}=this.getProperty("/taskEditByUser");this.setProperty(t,s);if(e.getProperty("/settings/history/persistent")===true){const t=this.getProperty("/history");localStorage.setItem("history",JSON.stringify(t))}},clearHistory(t=false){this.setProperty("/history",[]);if(t===true){localStorage.setItem("history",JSON.stringify([]))}},syncHistory(){const t=localStorage.getItem("history");if(!!t&&t!=="[]"){this.setProperty("/history",JSON.parse(t));return true}else{return false}}});return new s({task:{title:"Nothing in particular",desc:""},taskEditByUser:{},taskEstimation:0,history:[]})});