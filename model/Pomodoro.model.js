sap.ui.define(["sap/ui/model/json/JSONModel","./Config.model","./Task.model"],function(t,e){"use strict";const s=t.extend("apps.pomodoro.model.PomodoroModel",{modelname:"Pomodoro",tie(t){t.getOwnerComponent().setModel(this,this.modelname)},init(){const{msTotal:t}=e.getProperty("/settings/pomodoro");this.setTimer(t)},setStatusNext(){const{isWorking:t,isPausing:e}=this.getProperty("/status");if(this.getProperty("/timer/counter")/8>=1&&t===true){this.setProperty("/timer/counter",0);return this.setStatusPausingLong()}if(t){return this.setStatusPausingShort()}if(e){return this.setStatusWorking()}},setStatusPrevious(){const{statusName:t}=this.getData();if(t==="Short break"){return this.setStatusPausingShort()}if(t==="Long break"){return this.setStatusPausingLong()}return this.setStatusWorking()},setTimer(t){this.setProperty("/timer/msTotal",t);this.setProperty("/timer/msLeft",t);this.setProperty("/timer/msExpired",0)},setStatusWorking(){const{msTotal:t,name:s}=e.getProperty("/settings/pomodoro");this.setProperty("/status",{isWorking:true,isPausing:false});this.setProperty("/statusName",s);this.setTimer(t)},setStatusPausingShort(){const{msTotal:t,name:s}=e.getProperty("/settings/shortBreak");this.setProperty("/status",{isWorking:false,isPausing:true});this.setProperty("/statusName",s);this.setTimer(t)},setStatusPausingLong(){const{msTotal:t,name:s}=e.getProperty("/settings/longBreak");this.setProperty("/status",{isWorking:false,isPausing:true});this.setProperty("/statusName",s);this.setTimer(t)},startTicking(t){this.stopTicking(true);const e=setInterval(()=>{this.tick(t)},1e3);this.setProperty("/intervalHandler",e);this.setProperty("/timer/ticking",true)},stopTicking(t=false){const e=this.getProperty("/intervalHandler");if(t===true){for(let t=1;t<Math.max();t++){clearInterval(t)}}clearInterval(e);this.setProperty("/timer/ticking",false)},tick(t){const{statusName:e}=this.getData();let{msLeft:s,msExpired:i}=this.getProperty("/timer");s-=1e3;i+=1e3;document.title=`${e} - ${(s/6e4).toFixed(1)} Minutes left`;if(s===0){this.playPhaseDoneAudio();setTimeout(()=>{document.title=`Finished ${e}`;t.handleFinishCurrentPhase()},1e3)}this.setProperty("/timer/msLeft",s);this.setProperty("/timer/msExpired",i)},playPhaseDoneAudio(){const{soundUrl:t}=e.getProperty("/settings/notification");const s=new Audio(t);s.play()},increaseCounter(t){let{counter:e}=this.getProperty("/timer");e+=t;this.setProperty("/timer/counter",e)}});return new s({timer:{msTotal:0,msLeft:0,msExpired:0,ticking:false,counter:0},statusName:"Working",status:{isWorking:true,isPausing:false},intervalHandler:null})});